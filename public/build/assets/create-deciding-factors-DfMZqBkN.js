document.addEventListener("DOMContentLoaded",function(){f(),h(),y(),p(),E(),v(),b()});function f(){for(let t=2;t<=3;t++)m(t)}function m(t){const e=document.querySelectorAll(`input[name="factor_${t}"]`),s=document.getElementById(`detail_${t}`),c=document.querySelectorAll(`input[name="satisfaction_${t}"]`);e.forEach(a=>{a.addEventListener("change",function(){const n=document.querySelector(`input[name="factor_${t}"]:checked`)!==null;console.log(`Factor ${t} selected: ${n}`),s.required=n,c.forEach(o=>o.required=n)})})}function y(){const t=document.getElementById("add-factor-button"),e=document.getElementById("factor-2"),s=document.getElementById("factor-3");t.addEventListener("click",function(){e.classList.contains("hidden")?e.classList.remove("hidden"):s.classList.contains("hidden")&&(s.classList.remove("hidden"),t.style.display="none")})}function h(){document.querySelectorAll(".factor-label").forEach(e=>{e.addEventListener("click",function(s){s.preventDefault();const c=this.previousElementSibling,a=c.name;c.checked=!c.checked,document.querySelectorAll(`input[name="${a}"]`).forEach(n=>{n!==c&&(n.checked=!1)}),g(a),updateAvailableOptions()})})}function g(t){document.querySelectorAll(`input[name="${t}"] + .factor-label`).forEach(e=>{e.previousElementSibling.checked?(e.classList.add("bg-cyan-500","text-white"),e.classList.remove("bg-white","text-gray-700")):(e.classList.remove("bg-cyan-500","text-white"),e.classList.add("bg-white","text-gray-700"))})}function p(){const t=document.querySelectorAll(".deciding-factor"),e={};t.forEach(c=>{const a=c.getAttribute("name");e[a]||(e[a]=[]),e[a].push(c)});function s(){const c=new Set;Object.values(e).forEach(a=>{a.forEach(n=>{n.checked&&c.add(n.value)})}),Object.values(e).forEach(a=>{a.forEach(n=>{const o=n.nextElementSibling;c.has(n.value)&&!n.checked?(n.disabled=!0,o.classList.add("opacity-50","cursor-not-allowed"),o.style.pointerEvents="none"):(n.disabled=!1,o.classList.remove("opacity-50","cursor-not-allowed"),o.style.pointerEvents="auto"),n.checked?(o.classList.add("bg-cyan-500","text-white"),o.classList.remove("bg-white","text-gray-700")):(o.classList.remove("bg-cyan-500","text-white"),o.classList.add("bg-white","text-gray-700"))})})}s(),window.updateAvailableOptions=s}function E(){document.querySelectorAll(".flex.items-center").forEach(e=>{const s=e.querySelectorAll("svg"),c=e.querySelectorAll('input[type="radio"]');s.forEach((a,n)=>{a.addEventListener("click",()=>{c[n].checked=!0,s.forEach((o,i)=>{i<=n?(o.classList.add("text-cyan-500"),o.classList.remove("text-gray-300")):(o.classList.add("text-gray-300"),o.classList.remove("text-cyan-500"))})})})})}function v(){document.querySelector("form").addEventListener("submit",function(e){e.preventDefault(),L()?this.submit():console.log("フォームのバリデーションに失敗しました")})}function L(){let t=!0;for(let e=1;e<=3;e++){const s=document.querySelectorAll(`input[name="factor_${e}"]`),c=document.getElementById(`detail_${e}`),a=document.querySelectorAll(`input[name="satisfaction_${e}"]`),n=Array.from(s).some(i=>i.checked),o=Array.from(a).some(i=>i.checked);(e===1||n)&&(n?d(`factor_${e}-error`):(t=!1,l(`factor_${e}-error`,"入社の決め手を選択してください。")),c.value.length<100?(t=!1,l(`detail_${e}-error`,"詳細は100文字以上入力してください。")):d(`detail_${e}-error`),o?d(`satisfaction_${e}-error`):(t=!1,l(`satisfaction_${e}-error`,"満足度を選択してください。")))}return t}function l(t,e){const s=document.getElementById(t);s&&(s.textContent=e,s.style.display="block")}function d(t){const e=document.getElementById(t);e&&(e.style.display="none")}function b(){for(let c=1;c<=3;c++){document.querySelectorAll(`input[name="factor_${c}"]`).forEach(o=>{if(o.checked){const i=o.nextElementSibling;if(i.classList.add("bg-cyan-500","text-white"),i.classList.remove("bg-white","text-gray-700"),c>1){const r=document.getElementById(`factor-${c}`);r&&r.classList.remove("hidden")}}});const n=document.querySelector(`input[name="satisfaction_${c}"]:checked`);if(n){const o=n.closest(".flex.items-center").querySelectorAll("svg"),i=parseInt(n.value);o.forEach((r,u)=>{u<i?(r.classList.add("text-cyan-500"),r.classList.remove("text-gray-300")):(r.classList.add("text-gray-300"),r.classList.remove("text-cyan-500"))})}}const t=document.getElementById("factor-2"),e=document.getElementById("factor-3"),s=document.getElementById("add-factor-button");!t.classList.contains("hidden")&&!e.classList.contains("hidden")&&(s.style.display="none"),updateAvailableOptions()}
